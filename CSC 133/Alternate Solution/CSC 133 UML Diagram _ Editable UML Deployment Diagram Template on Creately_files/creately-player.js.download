!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,n={width:"100%",height:"100%",showSharing:!0,showCreately:!0,backgroundColor:"#ffffff",disableFullScreen:!1,disableMobile:!1,showBorder:!0,endPointBaseURL:""};!function(t){t[t.Standard=0]="Standard",t[t.Mobile=1]="Mobile"}(o||(o={}));var r;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(r||(r={}));var s=function(){function t(t,e,i){this.containerId=t,this.diagramIdentifier=e,this.options=i,this.validate(),this.populateDefaultOptions(),this.playerId=this.generateId(),this.iframe=this.createIframe(this.getLocation()),this.listenToMessages(window),this.isBackNavigation(window)&&this.reloadIFrame()}return t.prototype.generateId=function(){return Math.random().toString(36).slice(2)},t.prototype.identifyPlayerType=function(t){var e=this.getOrientation(t);return(e===r.Portrait&&t.screen.width<760||e===r.Landscape&&t.screen.height<760)&&!this.options.disableMobile?o.Mobile:o.Standard},t.prototype.getLocation=function(){var t=this.identifyPlayerType(window);return"https://app.creately.com/player/"+o[t].toLowerCase()+"/src/index.html"},t.prototype.createIframe=function(t){var e=document.getElementById(this.containerId),i=document.createElement("div"),o=document.createElement("iframe");return o.setAttribute("src",t+"?playerId="+this.playerId),o.setAttribute("id",this.playerId),o.style.width=this.options.width,o.style.height=this.options.height,i.style.width=this.options.width,i.style.height=this.options.height,i.style.overflow="hidden",this.options.showBorder?i.style.border="1px solid #e4e4e4":i.style.border="none",o.style.border="none",o.style.transition="all 300ms",e.appendChild(i),i.appendChild(o)},t.prototype.validate=function(){this.isValidDiv()||this.error("A valid element id was not provided to insert the diagram")},t.prototype.isValidDiv=function(){return this.containerId&&document.getElementById(this.containerId)},t.prototype.populateDefaultOptions=function(){if(!this.options)return void(this.options=n);this.options.width||(this.options.width=n.width),this.options.height||(this.options.height=n.height),"boolean"!=typeof this.options.showSharing&&(this.options.showSharing=n.showSharing),"boolean"!=typeof this.options.showCreately&&(this.options.showCreately=n.showCreately),this.options.backgroundColor||(this.options.backgroundColor=n.backgroundColor),"boolean"!=typeof this.options.disableFullScreen&&(this.options.disableFullScreen=n.disableFullScreen),"boolean"!=typeof this.options.disableMobile&&(this.options.disableMobile=n.disableMobile),"boolean"!=typeof this.options.showBorder&&(this.options.showBorder=n.showBorder),this.options.endPointBaseURL||(this.options.endPointBaseURL=n.endPointBaseURL)},t.prototype.listenToMessages=function(t){var e=this;t.addEventListener("message",function(t){return e.messageRecieved(t)})},t.prototype.messageRecieved=function(t){var e=this,i=t.data;if(i&&"object"==typeof i&&i.identifier===this.playerId)switch(i.type){case"getParentSize":var o={width:window.innerWidth,height:window.innerHeight};this.sendMessage("parentSize",o,t.origin);break;case"getOptions":var n={identifier:this.diagramIdentifier,options:this.options};this.sendMessage("options",n,t.origin);break;case"toggleFullScreen":var r=function(){return e.sendMessage("success",t.origin)};!0===i.data?(this.recordScrollTop(window),this.applyFullscreenStyles(r)):this.removeFullscreenStyles(r);break;case"toggleResponsiveView":!0===i.data.state?this.turnOnDeviceViewport():(this.updateParentScrollPosition(window),this.turnOffDeviceViewport()),this.sendMessage("success",t.origin);break;case"getParentScrollTop":this.sendMessage("parentScrollTop",window.parent.document.body.scrollTop,t.origin)}},t.prototype.applyFullscreenStyles=function(t){var e=this;this.enableParentScroll(!1),this.top=this.iframe.getBoundingClientRect().top.toString(),this.left=this.iframe.getBoundingClientRect().left.toString(),this.iframe.style.top=this.top+"px",this.iframe.style.left=this.left+"px",this.iframe.style.zIndex="16777271",this.iframe.style.position="fixed",setTimeout(function(){e.iframe.style.width="100%",e.iframe.style.height="100%",e.iframe.style.top="0",e.iframe.style.left="0",t()},50)},t.prototype.removeFullscreenStyles=function(t){var e=this;this.enableParentScroll(),this.iframe.style.width=this.options.width,this.iframe.style.height=this.options.height,this.iframe.style.top=this.top+"px",this.iframe.style.left=this.left+"px",t(),setTimeout(function(){e.iframe.style.position="static",e.iframe.style.top="unset",e.iframe.style.left="unset"},300)},t.prototype.sendMessage=function(t,e,i){void 0===i&&(i="*"),this.iframe.contentWindow.postMessage({identifier:this.playerId,type:t,data:e},i)},t.prototype.error=function(t){throw new Error("Creately Embed: "+t)},t.prototype.turnOnDeviceViewport=function(){try{this.parentWidth=window.innerWidth;var t=document.getElementsByTagName("meta");if(0===Array.prototype.filter.call(t,function(t){return"viewport"===t.name}).length){var e=document.createElement("meta");e.setAttribute("id","bViewPortMeta"),e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1.0 user-scalable=no"),this.appendViewPortMetaElement(e)}}catch(t){}},t.prototype.turnOffDeviceViewport=function(){try{if(this.removeMetaIfExist()){var t=document.createElement("meta");t.setAttribute("id","bViewPortMeta"),t.setAttribute("name","viewport"),t.setAttribute("content","width="+this.parentWidth+", user-scalable=yes"),this.appendViewPortMetaElement(t),this.removeMetaIfExist()}}catch(t){}},t.prototype.removeMetaIfExist=function(){var t=window.parent.document.getElementById("bViewPortMeta");return!!t&&(window.parent.document.getElementsByTagName("head")[0].removeChild(t),!0)},t.prototype.appendViewPortMetaElement=function(t){window.parent.document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.enableParentScroll=function(t){void 0===t&&(t=!0);var e="unset";t||(e="hidden"),window.parent.document.getElementsByTagName("body")[0].style.overflow=e},t.prototype.recordScrollTop=function(t){this.parentScrollTop=t.parent.document.body.scrollTop||t.parent.document.documentElement.scrollTop},t.prototype.updateParentScrollPosition=function(t){t.parent.document.documentElement.scrollTop=t.parent.document.body.scrollTop=this.parentScrollTop},t.prototype.getOrientation=function(t){return t.screen.width>t.screen.height?r.Landscape:r.Portrait},t.prototype.reloadIFrame=function(){this.iframe.src=this.iframe.src},t.prototype.isBackNavigation=function(t){return t.performance&&2===t.performance.navigation.type},t}();window.CreatelyPlayer=s}]);